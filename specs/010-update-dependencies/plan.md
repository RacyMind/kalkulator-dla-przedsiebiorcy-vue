# Implementation Plan: Aktualizacja zależności (Milestone 1)

**Branch**: `010-update-dependencies` | **Date**: 2026-02-06 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/010-update-dependencies/spec.md`

**Note**: This plan was generated by the `/speckit.plan` command.

## Summary

Update all project dependencies to latest stable versions, migrate build tooling configuration (`@quasar/app-vite` v1→v2, ESLint v8→v9 flat config, TypeScript v4→v5 with strict mode), replace the unmaintained chart library, and remove obsolete dependencies. All changes must be staged with tests passing after each step. No changes to calculation logic.

## Technical Context

**Language/Version**: TypeScript 4.5 → **5.x** (with `strict: true` enabled)
**Framework**: Quasar 2.18 → **latest 2.x** (UI components)
**Build Tools**: `@quasar/app-vite` 1.11 → **2.x** (breaking: config JS→TS migration)
**State Management**: Pinia 2.x → **latest 2.x**
**Testing**: Vitest 2.x → **latest**, Quasar Testing Extensions → **latest compatible**
**Platform**: PWA (workbox 6→**7**) + Capacitor (Android)
**Linting**: ESLint 8→**9** (flat config), Prettier 2→**3**, typescript-eslint 5→**8**
**Key Migrations**:
- `quasar.config.js` → `quasar.config.ts` (app-vite v2 requirement)
- `.eslintrc.js` → `eslint.config.js` (ESLint v9 flat config)
- `@j-t-mcc/vue3-chartjs` → `vue-chartjs` + `chart.js` v4
- `date-fns` v2 → v4 (ESM-only, changed import paths)
- Sass deprecation warnings accepted, deferred to Milestone 2
- Incompatible deps pinned to last compatible version with documented blocker

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

Constitution file contains only template placeholders — no project-specific principles defined. Gate passes by default. No constraints to validate against.

**Status**: ✅ PASS (no active gates)

## Project Structure

### Documentation (this feature)

```text
specs/010-update-dependencies/
├── plan.md              # This file
├── spec.md              # Feature specification
├── research.md          # Migration research & decisions
├── data-model.md        # Data model (minimal — infrastructure change)
├── quickstart.md        # Quick start guide for this migration
├── checklists/
│   └── requirements.md  # Spec quality checklist
└── tasks.md             # Task list (generated by /speckit.tasks)
```

### Files Affected by Migration

```text
Root config files:
├── package.json                    # Dependency versions
├── quasar.config.js → .ts          # Build config migration
├── .eslintrc.js → eslint.config.js # Linting config migration
├── tsconfig.json                   # Enable strict: true
├── .babelrc / babel.config.js      # To be removed (Vite-based project)
└── vitest.config.ts                # Possible updates for new vitest

Source files (chart library swap):
├── src/components/partials/Chart.vue
├── src/components/partials/statistics/PieChart.vue
├── src/components/partials/LineChart.vue
├── src/use/usePieChart.ts
├── src/use/useBarChart.ts
└── src/use/useLineChart.ts

Source files (date-fns import changes):
└── src/**/*.ts (files importing from date-fns)

Source files (TypeScript strict mode fixes):
└── src/**/*.ts, src/**/*.vue (type errors revealed by strict mode)

PWA config:
├── src-pwa/custom-service-worker.ts  # workbox v7 API
└── src-pwa/register-service-worker.ts

Boot files (compatibility check):
├── src/boot/google-analytics.ts
└── src/boot/admob.ts
```

## Pre-Implementation Checklist

- [ ] All existing tests pass before starting (`npx vitest run`)
- [ ] Each update stage is a separate commit (PR-002)
- [ ] Tests run after each stage (PR-001)
- [ ] No calculation logic changes (FR-003)
- [ ] Incompatible deps pinned with documented blocker (PR-006)
- [ ] `quasar dev` starts without critical errors (SC-004)
- [ ] `quasar build -m pwa` succeeds (SC-002)
- [ ] `quasar build -m capacitor -T android` succeeds (SC-003)
- [ ] Linting passes without critical errors (SC-006)
- [ ] Charts render correctly in all modules (SC-005)
- [ ] PWA offline mode works (SC-008)
- [ ] Changelog updated in `src/components/changeLogs/logs.ts`
