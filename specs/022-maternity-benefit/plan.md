# Implementation Plan: Kalkulator zasiłku macierzyńskiego

**Branch**: `022-maternity-benefit` | **Date**: 2026-02-10 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/022-maternity-benefit/spec.md`

## Summary

Nowy moduł kalkulatora zasiłku macierzyńskiego. Użytkownik wybiera formę zatrudnienia (umowa o pracę / działalność gospodarcza), podaje podstawę wynagrodzenia/składek i liczbę dzieci. Kalkulator oblicza zasiłek w dwóch wariantach wypłaty (81,5% stały / 100%+70% zmienny) z podziałem na urlop macierzyński i rodzicielski. Dodatkowo wyświetla informację o 9-tygodniowym urlopie dla drugiego rodzica.

## Technical Context

**Language/Version**: TypeScript 4.5+ / Vue 3.4+  
**Framework**: Quasar 2.18+ (UI components)  
**State Management**: Pinia 2.x  
**Testing**: Vitest 2.x  
**Platform**: PWA (Progressive Web App) + Cordova (Android/iOS)  
**Project Type**: Single-page application (SPA)  
**UI Language**: Polish  
**Key Dependencies**:

- `BasicCalculator` — base class for all calculators (`src/logic/BasicCalculator.ts`)
- `Calculator` interface — (`src/logic/interfaces/Calculator.ts`)
- `validationRules` — form validation rules (`src/logic/validationRules.ts`)
- `helpers.round()` — rounding utility (`src/logic/helpers.ts`)
- `useConstantsStore()` — ZUS constants, wage stats (`stores/constantsStore.ts`)
- `useLocalStorage` — form field persistence (`@vueuse/core`)
- Quasar components — `q-form`, `q-input`, `q-select`, `q-card`
- Shared UI components — `FormSection`, `SubmitButton`, `LawRuleDate`

**Key Constants from `constantsStore`**:

- `zusConstants.entrepreneur.basises.big` — podstawa dużego ZUS (2026: 5 652,00 zł)
- `zusConstants.entrepreneur.basises.small()` — podstawa preferencyjnego ZUS (2026: 1 441,80 zł)
- `zusConstants.employee.rates.pensionContribution` — 9,76%
- `zusConstants.employee.rates.disabilityContribution` — 1,5%
- `zusConstants.employee.rates.sickContribution` — 2,45%
- Suma składek społecznych = 13,71% (obliczana dynamicznie)
- `wageStats.projectedAverageWage()` — do obliczenia limitu 250%

## Constitution Check

_GATE: Must pass before Phase 0 research. Re-check after Phase 1 design._

Constitution nie jest skonfigurowana (plik zawiera szablon). Brak zdefiniowanych gate'ów — kontynuacja dozwolona.

**Post-design re-check**: ✅ Passed — brak naruszeń.

## Project Structure

### Documentation (this feature)

```text
specs/022-maternity-benefit/
├── plan.md              # This file
├── research.md          # Research and analysis
├── data-model.md        # Data model
├── quickstart.md        # Quick start
├── contracts/           # API contracts
│   └── calculator-api.md
└── tasks.md             # Task list (generated by /speckit.tasks)
```

### Source Code

```text
src/
├── components/
│   └── maternityBenefit/              # New calculator module
│       ├── components/
│       │   ├── Form.vue               # Formularz z wyborem formy zatrudnienia
│       │   └── ResultList.vue         # Wyniki w dwóch kolumnach (wariant A / B)
│       ├── interfaces/
│       │   ├── InputFields.ts         # Dane wejściowe
│       │   └── Result.ts             # Wynik obliczeń
│       ├── logic/
│       │   ├── MaternityBenefitCalculator.ts  # Logika kalkulatora
│       │   └── leavePeriodsConfig.ts          # Wymiary urlopów
│       ├── pages/
│       │   └── MaternityBenefitPage.vue       # Strona modułu
│       ├── types/
│       │   ├── EmploymentType.ts      # Enum: employmentContract | selfEmployment
│       │   ├── ZusType.ts             # Enum: big | preferential | custom
│       │   └── ChildrenCount.ts       # Type: 1 | 2 | 3 | 4 | 5
│       └── store.ts                   # Pinia store
├── logic/
│   ├── BasicCalculator.ts             # (existing)
│   ├── validationRules.ts             # (existing, may need new rule for max basis)
│   └── helpers.ts                     # (existing)
├── router/                            # Add route for new module
└── stores/
    └── constantsStore.ts              # (existing, no changes needed)

test/vitest/__tests__/
└── modules/
    └── maternityBenefit/
        └── MaternityBenefitCalculator.test.ts
```

**Module Pattern**: Use `src/components/contractWork/` as reference implementation

## Pre-Implementation Checklist

- [ ] Calculator logic extends `BasicCalculator`
- [ ] UI components use Quasar
- [ ] UI text in Polish language
- [ ] Validation uses `validationRules`
- [ ] Tests include all output values
- [ ] Leave period constants defined in module (not `constantsStore`)
- [ ] ZUS basis values read from `constantsStore` (not hardcoded)
- [ ] Social contribution rate (13,71%) calculated dynamically from store
- [ ] Upper limit validation (250% average wage) implemented
- [ ] Both payment variants (81,5% / 100%+70%) calculated
- [ ] Second parent 9-week benefit calculated
- [ ] Route added to router
- [ ] Changelog updated in `src/components/changeLogs/logs.ts`
