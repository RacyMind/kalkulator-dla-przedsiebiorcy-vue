# Implementation Plan: Finalizacja i testy (Milestone 6)

**Branch**: `015-finalization-tests` | **Date**: 2026-02-07 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/015-finalization-tests/spec.md`

## Summary

Final quality assurance, performance optimization, version bump to v6.0.0 (consolidated release), Capacitor Android build verification, and cleanup before production release. Manual module testing already completed. This milestone focuses on automated regression tests, Lighthouse audits, version synchronization across all locations, README update, dead code cleanup, and final production builds (PWA + Android).

## Technical Context

**Language/Version**: TypeScript 5.9+ / Vue 3.5+  
**Framework**: Quasar 2.18+ (UI components), @quasar/app-vite v2.4+  
**State Management**: Pinia 2.3+  
**Testing**: Vitest 4.x  
**Platform**: PWA (Progressive Web App) + Capacitor (Android)  
**Build Tool**: Vite (via @quasar/app-vite)  
**Project Type**: Single-page application (SPA)  
**UI Language**: Polish  

**Key Files for Version Sync**:
- `package.json` — current: `5.11.0`, target: `6.4.0`
- `src/stores/constantsStore.ts` — `app.version`: current `5.11.0`, target: `6.4.0`
- `src-pwa/manifest.json` — current: `5.6.0` (outdated!), target: `6.4.0`
- `src-capacitor/capacitor.config.json` — `appName` references "2023-2026", needs update

**Changelog State**: Already has entries for v6.0.0 through v6.3.0. Need to add consolidated v6.4.0 release entry summarizing all Milestone 1–6 changes.

**Router**: All 29 modules already use dynamic imports (`() => import(...)`) — lazy loading confirmed ✅

**PWA/Service Worker**: Uses Workbox `GenerateSW` mode with `skipWaiting: true` + `clientsClaim: true` — auto-update strategy confirmed ✅

**Test Coverage**: 22 module test directories exist. Modules without dedicated test directories: exchangeRates, salaryStats, terms, changeLogs, contact, privacyPolicy, polishBonds. Some of these are informational (no calculator logic) so tests may not be required.

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

Constitution is not customized for this project (template placeholders only). No specific gates to enforce. Proceeding with standard quality practices.

**Post-design re-check**: N/A — constitution not configured.

## Project Structure

### Documentation (this feature)

```text
specs/015-finalization-tests/
├── plan.md              # This file
├── research.md          # Research and analysis
├── data-model.md        # Data model (version locations)
├── quickstart.md        # Quick start guide
├── checklists/
│   └── requirements.md  # Spec quality checklist
└── tasks.md             # Task list (generated by /speckit.tasks)
```

### Files to Modify

```text
# Version sync
package.json                              # version → 6.4.0
src/stores/constantsStore.ts              # app.version → 6.4.0
src-pwa/manifest.json                     # version → 6.4.0
src-capacitor/capacitor.config.json       # appName update

# Documentation
README.md                                 # Full rewrite with v6 features
src/components/changeLogs/logs.ts         # Add v6.4.0 consolidated entry

# Cleanup targets (to be identified)
# - Unused files
# - TODO comments
# - Dead code
```

### Test Structure

```text
test/vitest/__tests__/
├── modules/                    # 22 module test dirs
│   ├── accountingWithSpouse/
│   ├── b2bComparator/
│   ├── cashRegisterLimit/
│   ├── contractOfEmployment/
│   ├── contractOfMandate/
│   ├── contractOfWork/
│   ├── currencyConverter/
│   ├── ikeSavings/
│   ├── ikzeTaxRelief/
│   ├── inflation/
│   ├── interest/
│   ├── investment/
│   ├── invoice/
│   ├── partialZusContributions/
│   ├── realBoughtCost/
│   ├── rentalProfit/
│   ├── salaryForUnusedHolidays/
│   ├── selfEmployment/
│   ├── sickPay/
│   ├── unregisteredCompany/
│   └── vatLimit/
├── composables/
├── logic/
│   ├── taxes/
│   └── zus/
├── services/
│   └── admob/
└── demo/
```

## Pre-Implementation Checklist

- [ ] All unit tests pass (`npx vitest run`)
- [ ] Version synchronized to `6.4.0` in all locations
- [ ] Changelog has consolidated v6.4.0 entry
- [ ] README.md updated with v6 features
- [ ] PWA production build succeeds (`quasar build -m pwa`)
- [ ] Lighthouse Performance > 90
- [ ] Lighthouse Accessibility > 90
- [ ] Capacitor Android build succeeds
- [ ] Dead code and TODO comments cleaned up
- [ ] Dark mode verified in all modules (manual — already done)
- [ ] Responsiveness verified on target breakpoints (manual — already done)
